import React, { useState, useEffect } from 'react';
import { 
  Menu, X, MapPin, Coffee, Wifi, Car, Trees, 
  MessageCircle, Star, Calendar as CalendarIcon, 
  ChevronRight, Users, CheckCircle, Quote, Instagram, 
  ArrowRight, Phone, Flame, Utensils, BedDouble, 
  Gamepad2, Church, ShoppingBag, PlusCircle
} from 'lucide-react';

/**
 * CONFIGURAÇÃO E DADOS MOCKADOS
 */

// Simulação de datas indisponíveis (Formato YYYY-MM-DD)
const UNAVAILABLE_DATES = [
  '2024-03-15', '2024-03-16', '2024-03-20'
];

const CONTACT_NUMBER = "5532999943917"; 
const GOOGLE_REVIEWS_LINK = "https://share.google/qZeifUqB9iKCaG66P";
const AIRBNB_LINK = "https://www.airbnb.com.br/rooms/1400169773928514039";

// Componente: Botão Primário
const Button = ({ children, onClick, variant = 'primary', className = '', icon: Icon }) => {
  const baseStyle = "inline-flex items-center justify-center px-6 py-3 rounded-full font-medium transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 cursor-pointer";
  const variants = {
    primary: "bg-green-700 text-white hover:bg-green-800",
    secondary: "bg-orange-100 text-orange-800 hover:bg-orange-200",
    outline: "border-2 border-white text-white hover:bg-white/10",
    whatsapp: "bg-green-500 text-white hover:bg-green-600"
  };

  return (
    <button onClick={onClick} className={`${baseStyle} ${variants[variant]} ${className}`}>
      {Icon && <Icon className="w-5 h-5 mr-2" />}
      {children}
    </button>
  );
};

// Seção: Header / Navegação
const Header = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [scrolled, setScrolled] = useState(false);

  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 50);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const navLinks = [
    { name: 'O Sítio', href: '#sobre' },
    { name: 'Acomodações', href: '#acomodacoes' },
    { name: 'Fotos', href: '#galeria' },
    { name: 'Dicas Locais', href: '#dicas' },
    { name: 'Reservar', href: '#reservas' },
  ];

  return (
    <header className={`fixed w-full z-50 transition-all duration-300 ${scrolled ? 'bg-white/95 backdrop-blur-md shadow-sm py-2' : 'bg-transparent py-4'}`}>
      <div className="container mx-auto px-4 flex justify-between items-center">
        {/* Logo */}
        <div className="flex items-center gap-2">
          <img src="logocangumbim.png" alt="Sítio Cangumbim" className="h-12 w-auto object-contain" />
        </div>

        {/* Desktop Nav */}
        <nav className="hidden md:flex gap-8">
          {navLinks.map((link) => (
            <a 
              key={link.name} 
              href={link.href} 
              className={`text-sm font-medium tracking-wide hover:text-green-600 transition-colors ${scrolled ? 'text-gray-700' : 'text-white drop-shadow-md'}`}
            >
              {link.name}
            </a>
          ))}
        </nav>

        {/* Mobile Menu Button */}
        <button className="md:hidden p-2 text-gray-600" onClick={() => setIsOpen(!isOpen)}>
          {isOpen ? <X /> : <Menu className={scrolled ? 'text-gray-800' : 'text-white'} />}
        </button>

        {/* Mobile Nav */}
        {isOpen && (
          <div className="absolute top-full left-0 w-full bg-white shadow-xl border-t md:hidden flex flex-col p-4 animate-fade-in">
            {navLinks.map((link) => (
              <a 
                key={link.name} 
                href={link.href} 
                className="py-3 text-gray-700 font-medium border-b border-gray-100 last:border-0"
                onClick={() => setIsOpen(false)}
              >
                {link.name}
              </a>
            ))}
          </div>
        )}
      </div>
    </header>
  );
};

// Seção: Hero
const Hero = () => {
  return (
    <section id="home" className="relative h-screen min-h-[600px] flex items-center justify-center overflow-hidden">
      {/* Imagem de Fundo com Overlay */}
      <div className="absolute inset-0 z-0">
        <img 
          src="IMG_1073.jpg" 
          alt="Vista panorâmica do Sítio Cangumbim" 
          className="w-full h-full object-cover"
        />
        <div className="absolute inset-0 bg-black/40 md:bg-black/30"></div>
        {/* Gradiente para suavizar a base */}
        <div className="absolute bottom-0 left-0 w-full h-32 bg-gradient-to-t from-stone-50 to-transparent"></div>
      </div>

      <div className="relative z-10 container mx-auto px-4 text-center text-white space-y-6 animate-fade-in-up">
        <span className="inline-block py-1 px-3 rounded-full bg-white/20 backdrop-blur-sm text-sm font-medium tracking-wider mb-2 border border-white/30">
          POVOADO DOS PINTO - RESENDE COSTA
        </span>
        <h1 className="text-4xl md:text-6xl font-serif font-bold leading-tight drop-shadow-lg">
          Viva dias de descanso e <br /> contato com a natureza
        </h1>
        <p className="text-lg md:text-xl max-w-2xl mx-auto opacity-90 font-light drop-shadow-md">
          Seu refúgio completo com cachoeira no quintal, casa ampla e todo o conforto que sua família merece.
        </p>
        
        <div className="flex flex-col sm:flex-row gap-4 justify-center pt-8">
          <Button variant="primary" onClick={() => document.getElementById('reservas').scrollIntoView({ behavior: 'smooth' })}>
            Verificar Disponibilidade
          </Button>
          <Button variant="outline" icon={MessageCircle} onClick={() => window.open(`https://wa.me/${CONTACT_NUMBER}`, '_blank')}>
            Falar no WhatsApp
          </Button>
        </div>
      </div>
    </section>
  );
};

// Seção: Sobre
const About = () => {
  return (
    <section id="sobre" className="py-20 bg-stone-50">
      <div className="container mx-auto px-4">
        <div className="flex flex-col md:flex-row items-center gap-12">
          <div className="w-full md:w-1/2">
            <div className="relative rounded-2xl overflow-hidden shadow-xl group">
              <img 
                src="https://images.unsplash.com/photo-1587595431973-160d0d94add1?auto=format&fit=crop&q=80&w=1600" 
                alt="Varanda aconchegante" 
                className="w-full h-[500px] object-cover transition-transform duration-700 group-hover:scale-105"
              />
              <div className="absolute -bottom-6 -right-6 w-48 h-48 bg-green-100 rounded-full mix-blend-multiply filter blur-3xl opacity-70"></div>
            </div>
          </div>
          <div className="w-full md:w-1/2 space-y-6">
            <h2 className="text-3xl md:text-4xl font-serif font-bold text-gray-800">
              Sobre este espaço
            </h2>
            <p className="text-gray-600 leading-relaxed text-lg">
              Viva dias de descanso no <strong>Sítio Cangumbim</strong>, localizado no Povoado dos Pinto, a apenas 13 km de Resende Costa e 30 km de São Tiago. O acesso é feito por uma estrada de terra bem conservada e de fácil tráfego.
            </p>
            <p className="text-gray-600 leading-relaxed">
              Ideal para famílias, casais ou grupos que desejam sossego. Nossa casa ampla oferece <strong>3 quartos (2 suítes)</strong>, cozinha completa com fogão a lenha, e uma área de lazer com sinuca e churrasqueira.
            </p>
            <p className="text-gray-600 leading-relaxed">
              O destaque fica para a natureza: temos uma <strong>cachoeira passando no quintal</strong> e estamos a apenas 200m da cachoeira principal do povoado. Relaxe nas redes em meio à mata, aproveite a capela charmosa em frente à casa e sinta a paz do interior.
            </p>
            
            <div className="grid grid-cols-2 gap-4 pt-4">
               <div className="flex items-center gap-2 text-gray-700">
                 <CheckCircle className="w-5 h-5 text-green-600" /> <span>Wi-Fi</span>
               </div>
               <div className="flex items-center gap-2 text-gray-700">
                 <CheckCircle className="w-5 h-5 text-green-600" /> <span>Cachoeira no quintal</span>
               </div>
               <div className="flex items-center gap-2 text-gray-700">
                 <CheckCircle className="w-5 h-5 text-green-600" /> <span>Câmeras de Segurança</span>
               </div>
               <div className="flex items-center gap-2 text-gray-700">
                 <CheckCircle className="w-5 h-5 text-green-600" /> <span>Pet Friendly</span>
               </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  );
};

// Seção: Detalhes da Acomodação
const RoomDetails = () => {
  return (
    <section id="acomodacoes" className="py-20 bg-white">
      <div className="container mx-auto px-4">
        <div className="text-center max-w-3xl mx-auto mb-16">
           <span className="text-green-700 font-bold tracking-widest uppercase text-sm">Conforto e Privacidade</span>
           <h2 className="text-3xl font-serif font-bold text-gray-800 mt-2">Distribuição dos Quartos</h2>
           <p className="text-gray-600 mt-4">Acomoda até 8 pessoas com conforto em 3 quartos espaçosos.</p>
        </div>

        <div className="grid md:grid-cols-3 gap-8">
          {/* Suíte 1 */}
          <div className="bg-stone-50 p-8 rounded-2xl border border-stone-100 hover:shadow-lg transition-all">
            <div className="bg-white w-12 h-12 rounded-full flex items-center justify-center shadow-sm mb-6 text-green-700">
              <BedDouble size={24} />
            </div>
            <h3 className="text-xl font-bold text-gray-800 mb-2">Suíte 1</h3>
            <p className="text-gray-600 text-sm mb-4">Privacidade e conforto para o casal.</p>
            <ul className="space-y-2 text-sm text-gray-600">
              <li className="flex items-center gap-2">• 1 Cama de Casal</li>
              <li className="flex items-center gap-2">• Banheiro privativo</li>
            </ul>
          </div>

          {/* Suíte 2 */}
          <div className="bg-stone-50 p-8 rounded-2xl border border-stone-100 hover:shadow-lg transition-all">
             <div className="bg-white w-12 h-12 rounded-full flex items-center justify-center shadow-sm mb-6 text-green-700">
              <div className="flex">
                <BedDouble size={20} />
                <Users size={16} className="-ml-1 mt-1" />
              </div>
            </div>
            <h3 className="text-xl font-bold text-gray-800 mb-2">Suíte 2</h3>
            <p className="text-gray-600 text-sm mb-4">Ideal para casal com filho.</p>
            <ul className="space-y-2 text-sm text-gray-600">
              <li className="flex items-center gap-2">• 1 Cama de Casal</li>
              <li className="flex items-center gap-2">• 1 Cama de Solteiro</li>
              <li className="flex items-center gap-2">• Banheiro privativo</li>
            </ul>
          </div>

          {/* Quarto 3 */}
          <div className="bg-stone-50 p-8 rounded-2xl border border-stone-100 hover:shadow-lg transition-all">
             <div className="bg-white w-12 h-12 rounded-full flex items-center justify-center shadow-sm mb-6 text-green-700">
               <div className="flex -space-x-1">
                 <Users size={20} />
                 <Users size={20} />
               </div>
            </div>
            <h3 className="text-xl font-bold text-gray-800 mb-2">Quarto 3</h3>
            <p className="text-gray-600 text-sm mb-4">Espaço para amigos ou crianças.</p>
            <ul className="space-y-2 text-sm text-gray-600">
              <li className="flex items-center gap-2">• 3 Camas de Solteiro</li>
              <li className="flex items-center gap-2">• Acesso ao banheiro social</li>
            </ul>
          </div>
        </div>
      </div>
    </section>
  );
};

// Seção: Galeria com Filtros
const Gallery = () => {
  const [activeCategory, setActiveCategory] = useState('Todos');
  const [visibleCount, setVisibleCount] = useState(9);
  const [selectedImage, setSelectedImage] = useState(null);

  // Categorias solicitadas
  const categories = ['Todos', 'Exterior', 'Interior', 'Natureza', 'Capela', 'Cachoeira'];

  // Resetar a contagem ao mudar de categoria
  useEffect(() => {
    setVisibleCount(9);
  }, [activeCategory]);

  // Imagens (algumas repetidas/mockadas pois o user enviou apenas 1 real)
  // Em produção, você substituiria os links do Unsplash pelas fotos reais correspondentes
  const allImages = [
    { src: "IMG_1073.jpg", category: "Exterior", title: "Fachada Principal" },
    { src: "https://images.unsplash.com/photo-1613553507747-5f8d62ad5904?auto=format&fit=crop&q=80&w=1600", category: "Interior", title: "Cozinha com Fogão a Lenha" },
    { src: "https://images.unsplash.com/photo-1596178065887-1198b6148b2b?auto=format&fit=crop&q=80&w=1600", category: "Interior", title: "Sala de Estar" },
    { src: "https://images.unsplash.com/photo-1533090161767-e6ffed986c88?auto=format&fit=crop&q=80&w=1600", category: "Natureza", title: "Arredores" },
    { src: "https://images.unsplash.com/photo-1444858291040-58f756a3bdd6?auto=format&fit=crop&q=80&w=1600", category: "Exterior", title: "Área de Lazer" },
    { src: "https://images.unsplash.com/photo-1438786657495-640937046d18?auto=format&fit=crop&q=80&w=1600", category: "Cachoeira", title: "Cachoeira Privativa" },
    { src: "https://images.unsplash.com/photo-1548625361-98770259b136?auto=format&fit=crop&q=80&w=1600", category: "Capela", title: "Capelinha" },
    { src: "https://images.unsplash.com/photo-1595846519845-68e298c2edd8?auto=format&fit=crop&q=80&w=1600", category: "Interior", title: "Quartos" },
    // Novas imagens adicionadas para testar o botão "Ver mais"
    { src: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&q=80&w=1600", category: "Natureza", title: "Trilhas Verdes" },
    { src: "https://images.unsplash.com/photo-1510798831971-661eb04b3739?auto=format&fit=crop&q=80&w=1600", category: "Natureza", title: "Pôr do Sol" },
    { src: "https://images.unsplash.com/photo-1584622650111-993a426fbf0a?auto=format&fit=crop&q=80&w=1600", category: "Interior", title: "Banheiro" },
    { src: "https://images.unsplash.com/photo-1595246140625-573b715d11f3?auto=format&fit=crop&q=80&w=1600", category: "Exterior", title: "Jardim" },
    { src: "https://images.unsplash.com/photo-1470770841072-f978cf4d019e?auto=format&fit=crop&q=80&w=1600", category: "Natureza", title: "Paisagem Local" },
  ];

  const filteredImages = activeCategory === 'Todos' 
    ? allImages 
    : allImages.filter(img => img.category === activeCategory);
    
  const visibleImages = filteredImages.slice(0, visibleCount);

  return (
    <section id="galeria" className="py-20 bg-stone-100">
      <div className="container mx-auto px-4">
        <h2 className="text-3xl md:text-4xl font-serif font-bold text-gray-800 text-center mb-8">Nossos Cantinhos</h2>
        
        {/* Filtros */}
        <div className="flex flex-wrap justify-center gap-2 mb-12">
          {categories.map((cat) => (
            <button
              key={cat}
              onClick={() => setActiveCategory(cat)}
              className={`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${
                activeCategory === cat 
                  ? 'bg-green-700 text-white shadow-md' 
                  : 'bg-white text-gray-600 hover:bg-green-50'
              }`}
            >
              {cat}
            </button>
          ))}
        </div>
        
        {/* Grid */}
        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 animate-fade-in">
          {visibleImages.map((img, index) => (
            <div 
              key={index} 
              className="group relative h-64 overflow-hidden rounded-xl cursor-pointer shadow-sm hover:shadow-xl transition-all"
              onClick={() => setSelectedImage(img.src)}
            >
              <img 
                src={img.src} 
                alt={img.title} 
                className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
              />
              <div className="absolute inset-0 bg-black/20 group-hover:bg-black/0 transition-all"></div>
              <div className="absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity">
                <span className="text-white text-sm font-medium">{img.title}</span>
                <p className="text-green-300 text-xs uppercase tracking-wide">{img.category}</p>
              </div>
            </div>
          ))}
        </div>

        {/* Botão Ver Mais */}
        {visibleCount < filteredImages.length && (
          <div className="flex justify-center mt-12">
            <button
              onClick={() => setVisibleCount(prev => prev + 6)}
              className="flex items-center gap-2 px-8 py-3 bg-white border border-gray-200 text-gray-600 rounded-full font-medium hover:bg-stone-50 hover:border-green-600 hover:text-green-700 transition-all shadow-sm"
            >
              <PlusCircle size={20} />
              Ver mais fotos
            </button>
          </div>
        )}
      </div>

      {/* Modal Lightbox */}
      {selectedImage && (
        <div className="fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4" onClick={() => setSelectedImage(null)}>
          <button className="absolute top-6 right-6 text-white hover:text-gray-300">
            <X size={40} />
          </button>
          <img src={selectedImage} alt="Zoom" className="max-w-full max-h-[90vh] rounded-lg shadow-2xl animate-fade-in" />
        </div>
      )}
    </section>
  );
};

// Seção: Comodidades Detalhadas
const Amenities = () => {
  const items = [
    { icon: Users, title: "Capacidade", desc: "Acomoda até 8 pessoas confortavelmente" },
    { icon: Utensils, title: "Cozinha Completa", desc: "Fogão a lenha, gás, airfryer e utensílios" },
    { icon: Gamepad2, title: "Lazer", desc: "Mesa de sinuca e TV na sala" },
    { icon: Flame, title: "Área Externa", desc: "Churrasqueira e lareira de chão (fogueira)" },
    { icon: Trees, title: "Natureza", desc: "Cachoeira no quintal e pomar" },
    { icon: Church, title: "Capela", desc: "Uma linda capela em frente à casa" },
    { icon: Wifi, title: "Conexão", desc: "Wi-Fi disponível" },
    { icon: Car, title: "Garagem", desc: "Coberta para 2 carros e motos" },
    { icon: CheckCircle, title: "Segurança", desc: "Propriedade monitorada por câmeras" },
  ];

  return (
    <section id="comodidades" className="py-20 bg-white">
      <div className="container mx-auto px-4">
        <h2 className="text-3xl font-serif font-bold text-gray-800 text-center mb-16">O que o Sítio oferece</h2>
        <div className="grid grid-cols-2 md:grid-cols-3 gap-8 md:gap-12">
          {items.map((item, idx) => (
            <div key={idx} className="flex flex-col items-center text-center p-6 rounded-2xl bg-stone-50 hover:bg-green-50 transition-colors duration-300 group">
              <div className="bg-white p-4 rounded-full shadow-sm mb-4 group-hover:scale-110 transition-transform">
                <item.icon className="w-8 h-8 text-green-700" />
              </div>
              <h3 className="font-bold text-gray-800 mb-2">{item.title}</h3>
              <p className="text-sm text-gray-600">{item.desc}</p>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
};

// Seção: Dicas Locais
const LocalTips = () => {
  return (
    <section id="dicas" className="py-20 bg-orange-50/50">
      <div className="container mx-auto px-4">
        <h2 className="text-3xl font-serif font-bold text-gray-800 text-center mb-12">Dicas do Povoado</h2>
        <div className="grid md:grid-cols-3 gap-6">
          {/* Dica 1 */}
          <div className="bg-white p-6 rounded-xl shadow-sm border border-orange-100 flex flex-col h-full">
            <div className="flex items-center gap-3 mb-4">
              <div className="p-2 bg-orange-100 text-orange-600 rounded-lg">
                <ShoppingBag size={24} />
              </div>
              <h3 className="font-bold text-lg text-gray-800">Bar do Roberto</h3>
            </div>
            <p className="text-gray-600 text-sm flex-grow">
              Excelente opção no povoado. Funciona dia e noite com itens de mercearia (arroz, alho, cebola, etc.), cerveja gelada e petiscos deliciosos à noite.
            </p>
          </div>

          {/* Dica 2 */}
          <div className="bg-white p-6 rounded-xl shadow-sm border border-orange-100 flex flex-col h-full">
             <div className="flex items-center gap-3 mb-4">
              <div className="p-2 bg-orange-100 text-orange-600 rounded-lg">
                <Utensils size={24} />
              </div>
              <h3 className="font-bold text-lg text-gray-800">Cantina da Tia Josi</h3>
            </div>
            <p className="text-gray-600 text-sm flex-grow">
              Comida caseira feita com carinho. O restaurante funciona mediante agendamento, perfeito para um almoço em família com sabor mineiro.
            </p>
          </div>

          {/* Dica 3 */}
          <div className="bg-white p-6 rounded-xl shadow-sm border border-orange-100 flex flex-col h-full">
             <div className="flex items-center gap-3 mb-4">
              <div className="p-2 bg-orange-100 text-orange-600 rounded-lg">
                <Coffee size={24} />
              </div>
              <h3 className="font-bold text-lg text-gray-800">Biscoitos da Jô</h3>
            </div>
            <p className="text-gray-600 text-sm flex-grow">
              Experimente os biscoitos artesanais vendidos separadamente ou agende um delicioso café colonial com a Jô, uma biscoiteira de mão cheia.
            </p>
          </div>
        </div>
      </div>
    </section>
  );
}

// Seção: Calendário e Reservas
const BookingCalendar = () => {
  const [date, setDate] = useState(new Date());
  const [selectedRange, setSelectedRange] = useState({ start: null, end: null });

  // Funções auxiliares de data
  const getDaysInMonth = (year, month) => new Date(year, month + 1, 0).getDate();
  const getFirstDayOfMonth = (year, month) => new Date(year, month, 1).getDay();

  const handleDateClick = (day) => {
    const clickedDateStr = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
    
    if (UNAVAILABLE_DATES.includes(clickedDateStr)) return;

    if (!selectedRange.start || (selectedRange.start && selectedRange.end)) {
      setSelectedRange({ start: clickedDateStr, end: null });
    } else {
      if (new Date(clickedDateStr) < new Date(selectedRange.start)) {
        setSelectedRange({ start: clickedDateStr, end: selectedRange.start });
      } else {
        setSelectedRange({ ...selectedRange, end: clickedDateStr });
      }
    }
  };

  const generateWhatsAppLink = () => {
    if (!selectedRange.start) return `https://wa.me/${CONTACT_NUMBER}`;
    
    const startFmt = selectedRange.start.split('-').reverse().join('/');
    const endFmt = selectedRange.end ? selectedRange.end.split('-').reverse().join('/') : '(a definir)';
    
    const message = `Olá! Tenho interesse em alugar o Sítio Cangumbim nas datas de ${startFmt} a ${endFmt}. Poderia me passar mais informações?`;
    return `https://wa.me/${CONTACT_NUMBER}?text=${encodeURIComponent(message)}`;
  };

  const renderCalendarDays = () => {
    const days = [];
    const daysInMonth = getDaysInMonth(date.getFullYear(), date.getMonth());
    const firstDay = getFirstDayOfMonth(date.getFullYear(), date.getMonth());

    for (let i = 0; i < firstDay; i++) {
      days.push(<div key={`empty-${i}`} className="h-10"></div>);
    }

    for (let i = 1; i <= daysInMonth; i++) {
      const currentStr = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
      const isUnavailable = UNAVAILABLE_DATES.includes(currentStr);
      const isSelected = selectedRange.start === currentStr || selectedRange.end === currentStr;
      const isInRange = selectedRange.start && selectedRange.end && currentStr > selectedRange.start && currentStr < selectedRange.end;

      let bgClass = "bg-white hover:bg-green-100 cursor-pointer text-gray-700";
      if (isUnavailable) bgClass = "bg-red-50 text-red-300 cursor-not-allowed";
      if (isSelected) bgClass = "bg-green-700 text-white hover:bg-green-800 shadow-md transform scale-105";
      if (isInRange) bgClass = "bg-green-100 text-green-800";

      days.push(
        <div 
          key={i}
          onClick={() => handleDateClick(i)}
          className={`h-10 w-10 flex items-center justify-center rounded-full text-sm font-medium transition-all duration-200 mx-auto ${bgClass}`}
        >
          {i}
        </div>
      );
    }
    return days;
  };

  return (
    <section id="reservas" className="py-20 bg-green-900 text-white">
      <div className="container mx-auto px-4">
        <div className="flex flex-col lg:flex-row gap-12 items-center">
          
          {/* Texto Call to Action */}
          <div className="lg:w-1/2 space-y-6">
            <h2 className="text-3xl md:text-5xl font-serif font-bold">Planeje seu descanso</h2>
            <p className="text-green-100 text-lg leading-relaxed">
              Consulte a disponibilidade no calendário ao lado. Selecione as datas de entrada e saída para gerar uma solicitação personalizada direto no nosso WhatsApp.
            </p>
            <div className="flex gap-4 text-sm text-green-200 pt-4">
              <div className="flex items-center gap-2"><div className="w-3 h-3 bg-white rounded-full"></div>Disponível</div>
              <div className="flex items-center gap-2"><div className="w-3 h-3 bg-red-400 rounded-full opacity-50"></div>Reservado</div>
              <div className="flex items-center gap-2"><div className="w-3 h-3 bg-green-500 rounded-full"></div>Sua Seleção</div>
            </div>
            
            {/* Display da Seleção */}
            <div className="bg-white/10 p-6 rounded-xl backdrop-blur-sm border border-white/10 mt-6">
              <div className="flex justify-between items-center mb-4">
                <div>
                  <p className="text-xs uppercase tracking-wider text-green-300">Check-in</p>
                  <p className="text-xl font-bold">{selectedRange.start ? selectedRange.start.split('-').reverse().join('/') : '--/--/--'}</p>
                </div>
                <ArrowRight className="text-green-300" />
                <div className="text-right">
                  <p className="text-xs uppercase tracking-wider text-green-300">Check-out</p>
                  <p className="text-xl font-bold">{selectedRange.end ? selectedRange.end.split('-').reverse().join('/') : '--/--/--'}</p>
                </div>
              </div>
              <Button 
                variant="whatsapp" 
                className="w-full" 
                icon={MessageCircle}
                onClick={() => window.open(generateWhatsAppLink(), '_blank')}
              >
                {selectedRange.start ? "Tenho interesse nessas datas" : "Falar no WhatsApp"}
              </Button>
            </div>
          </div>

          {/* Calendário UI */}
          <div className="lg:w-1/2 w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 text-gray-800">
            <div className="flex justify-between items-center mb-6">
              <h3 className="text-xl font-bold font-serif capitalize">
                {date.toLocaleString('pt-BR', { month: 'long', year: 'numeric' })}
              </h3>
              <div className="flex gap-2">
                <button className="p-2 hover:bg-gray-100 rounded-full" onClick={() => setDate(new Date(date.setMonth(date.getMonth() - 1)))}>{'<'}</button>
                <button className="p-2 hover:bg-gray-100 rounded-full" onClick={() => setDate(new Date(date.setMonth(date.getMonth() + 1)))}>{'>'}</button>
              </div>
            </div>
            
            <div className="grid grid-cols-7 gap-1 mb-2 text-center text-xs font-bold text-gray-400 uppercase">
              <div>Dom</div><div>Seg</div><div>Ter</div><div>Qua</div><div>Qui</div><div>Sex</div><div>Sáb</div>
            </div>
            <div className="grid grid-cols-7 gap-y-2">
              {renderCalendarDays()}
            </div>
            <p className="text-xs text-center text-gray-400 mt-6">
              * Valores especiais para feriados. Consulte-nos.
            </p>
          </div>

        </div>
      </div>
    </section>
  );
};

// Seção: Avaliações
const Reviews = () => {
  return (
    <section className="py-20 bg-stone-50">
      <div className="container mx-auto px-4">
        <h2 className="text-3xl font-serif font-bold text-center mb-12 text-gray-800">Quem veio, amou</h2>
        <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
          
          <div className="bg-white p-8 rounded-xl shadow-sm hover:shadow-md transition-shadow relative">
            <Quote className="absolute top-6 right-6 text-green-100 w-12 h-12" />
            <div className="flex items-center gap-1 mb-4 text-yellow-400">
              <Star fill="currentColor" size={18} />
              <Star fill="currentColor" size={18} />
              <Star fill="currentColor" size={18} />
              <Star fill="currentColor" size={18} />
              <Star fill="currentColor" size={18} />
            </div>
            <p className="text-gray-600 mb-6 italic">"Lugar incrível para descansar e curtir a natureza. A casa é super equipada e aconchegante. Voltaremos com certeza!"</p>
            <div className="flex justify-between items-end border-t pt-4">
              <div>
                <p className="font-bold text-gray-800">Hóspede Airbnb</p>
                <p className="text-xs text-gray-500">Fev 2024</p>
              </div>
              <img src="https://upload.wikimedia.org/wikipedia/commons/6/69/Airbnb_Logo_B%C3%A9lo.svg" className="h-6 opacity-50" alt="Airbnb" />
            </div>
          </div>

          <div className="bg-white p-8 rounded-xl shadow-sm hover:shadow-md transition-shadow relative">
            <Quote className="absolute top-6 right-6 text-green-100 w-12 h-12" />
             <div className="flex items-center gap-1 mb-4 text-yellow-400">
              <Star fill="currentColor" size={18} />
              <Star fill="currentColor" size={18} />
              <Star fill="currentColor" size={18} />
              <Star fill="currentColor" size={18} />
              <Star fill="currentColor" size={18} />
            </div>
            <p className="text-gray-600 mb-6 italic">"Experiência única. O anfitrião foi muito atencioso e o sítio é ainda mais bonito pessoalmente. Recomendo para famílias."</p>
            <div className="flex justify-between items-end border-t pt-4">
              <div>
                <p className="font-bold text-gray-800">Hóspede Airbnb</p>
                <p className="text-xs text-gray-500">Jan 2024</p>
              </div>
               <img src="https://upload.wikimedia.org/wikipedia/commons/6/69/Airbnb_Logo_B%C3%A9lo.svg" className="h-6 opacity-50" alt="Airbnb" />
            </div>
          </div>

           <div className="bg-green-50 p-8 rounded-xl border border-green-100 flex flex-col items-center justify-center text-center">
            <h3 className="font-bold text-gray-800 text-xl mb-2">Veja mais avaliações</h3>
            <p className="text-gray-600 mb-6">Confira o que estão falando sobre nós no Google e Airbnb.</p>
            <div className="flex gap-3">
              <a href={GOOGLE_REVIEWS_LINK} target="_blank" rel="noreferrer" className="px-4 py-2 bg-white rounded-full shadow-sm text-sm font-medium text-blue-600 hover:bg-blue-50 transition-colors">Google</a>
              <a href={AIRBNB_LINK} target="_blank" rel="noreferrer" className="px-4 py-2 bg-white rounded-full shadow-sm text-sm font-medium text-red-500 hover:bg-red-50 transition-colors">Airbnb</a>
            </div>
          </div>

        </div>
      </div>
    </section>
  );
};

// Seção: Footer
const Footer = () => {
  return (
    <footer id="contato" className="bg-gray-900 text-gray-300 pt-16 pb-8">
      <div className="container mx-auto px-4">
        <div className="grid md:grid-cols-4 gap-12 mb-12">
          
          <div className="col-span-1 md:col-span-2 space-y-4">
            <img src="logocangumbim.png" alt="Sítio Cangumbim" className="h-16 w-auto brightness-200 grayscale opacity-80" />
            <p className="max-w-xs text-sm leading-relaxed text-gray-400">
              Seu refúgio na natureza em Resende Costa, MG. <br/>
              Simplicidade, conforto e memórias para a vida toda.
            </p>
          </div>

          <div>
            <h4 className="text-white font-bold mb-4">Acesso Rápido</h4>
            <ul className="space-y-2 text-sm">
              <li><a href="#home" className="hover:text-green-400 transition-colors">Início</a></li>
              <li><a href="#galeria" className="hover:text-green-400 transition-colors">Galeria</a></li>
              <li><a href="#reservas" className="hover:text-green-400 transition-colors">Reservas</a></li>
              <li><a href={AIRBNB_LINK} target="_blank" rel="noreferrer" className="hover:text-green-400 transition-colors">Airbnb</a></li>
            </ul>
          </div>

          <div>
             <h4 className="text-white font-bold mb-4">Fale Conosco</h4>
             <ul className="space-y-2 text-sm">
               <li className="flex items-center gap-2">
                 <Phone size={16} />
                 <span>(32) 99994-3917</span>
               </li>
               <li className="flex items-center gap-2">
                 <Instagram size={16} />
                 <span>@sitiocangumbim</span>
               </li>
               <li className="flex items-center gap-2">
                 <MapPin size={16} />
                 <span>Resende Costa - MG</span>
               </li>
             </ul>
          </div>

        </div>

        <div className="border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center text-xs text-gray-500">
          <p>&copy; {new Date().getFullYear()} Sítio Cangumbim. Todos os direitos reservados.</p>
          <p className="mt-2 md:mt-0">Desenvolvido com carinho.</p>
        </div>
      </div>
    </footer>
  );
};

// Botão Flutuante do WhatsApp
const FloatingWhatsApp = () => (
  <a 
    href={`https://wa.me/${CONTACT_NUMBER}`}
    target="_blank"
    rel="noreferrer"
    className="fixed bottom-6 right-6 z-40 bg-green-500 text-white p-4 rounded-full shadow-lg hover:bg-green-600 transition-all hover:scale-110 flex items-center gap-2 group"
    aria-label="Falar no WhatsApp"
  >
    <MessageCircle size={24} />
    <span className="max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-300 whitespace-nowrap font-medium pr-0 group-hover:pr-2">
      Falar agora
    </span>
  </a>
);

// Componente Principal App
export default function App() {
  return (
    <div className="font-sans antialiased text-gray-900 bg-stone-50 selection:bg-green-200 selection:text-green-900">
      <Header />
      <Hero />
      <About />
      <RoomDetails />
      <Amenities />
      <Gallery />
      <LocalTips />
      <BookingCalendar />
      <Reviews />
      <Footer />
      <FloatingWhatsApp />
    </div>
  );
}